import{d as T,b as w,r as u,c as k,e as l,f as d,w as P,h as F,v as Y,i as b,t as g,j as N,k as J,F as O,l as q,m as K,p as h,q as I,x as L,u as S,y as V,z,A as Q,B as ee,T as te,C as ne,D as se}from"./vendor.vue-0f33053c.js";import{S as oe,B as ae,M as ie,a as re,E as ce,L as le,b as de,P as ue,V as X,O as me,W as _e}from"./vendor.three-7714326d.js";import{u as he}from"./vendor.@vueuse-99bd88ba.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();const y=new oe,pe=["#9D44B5","#34312D","#B5446E","#80B192","#8D918B","#CE84AD","#210124","#00A878","#750D37","#345995","#9B2915","#50A2A7","#0496FF","#05204A","#558564","#5AB1BB","#34D1BF","#C492B1","#57C4E5","#84A9C0","#9DACFF","#B8B42D"],fe={colors:pe};function ve(){const e=fe.colors;return e[Math.floor(Math.random()*e.length)]}function ge(e){return+e.replace(/#/,"0x")}function _(e,t){switch(t){case"mm":return e;case"cm":return e*10;case"m":return e*1e3;case"in":return+(e*25.4).toFixed(4);case"ft":return+(e*304.8).toFixed(4);case"ya":return+(e*914.4).toFixed(4);case"mi":return+(e*1609344).toFixed(4);default:return e}}function be(e){const t=/(\d+(?:\.\d+)?), ?(\d+(?:\.\d+)?), ?(\d+(?:\.\d+)?)/,n=e.match(t);if(n)return{data:n[0],width:+n[1],height:+n[2],length:+n[3]}}const x=T("items",{state:()=>({items:he("drawable-items",[])}),getters:{maxWidth:e=>{if(!e.items.length)return 0;const t=[];for(const n of e.items)t.push(_(n.width,n.dimensionAbbr));return Math.max(...t)},maxHeight:e=>{if(!e.items.length)return 0;const t=[];for(const n of e.items)t.push(_(n.height,n.dimensionAbbr));return Math.max(...t)},maxLength:e=>{if(!e.items.length)return 0;const t=[];for(const n of e.items)t.push(_(n.height,n.dimensionAbbr));return Math.max(...t)},middlePositionX:e=>{var a,s;if(!e.items.length||e.items.length===1)return 0;const t=((a=e.items.at(0))==null?void 0:a.positionX)??0,n=((s=e.items.at(-1))==null?void 0:s.positionX)??0;return(t+n)/2},lastItemColor:e=>{const t=e.items.at(-1);if(t)return t.color}},actions:{createItem(e){const t=e.name,n=_(e.width,e.dimensionAbbr),a=_(e.height,e.dimensionAbbr),s=_(e.length,e.dimensionAbbr),o=ge(e.color),i=e.positionX,f=new ae(n,a,s),c=new ie({color:o}),r=new re(f,c),m=new ce(r.geometry),C=new le({color:16777215}),A=new de(m,C);return r.name=t,r.position.setX(i??0),r.add(A),r},addItem(e){e.positionX=this.calcCurrentPositionX(e.width,e.dimensionAbbr);const t=e;this.items.push(t);const n=this.createItem(e);y.add(n),M().updateCamera()},repositionItems(){const e=this.items;for(let t=0;t<e.length;t++){const n=e[t-1],a=e[t];if(a===e[0]){a.positionX=0;continue}const s=n.positionX??0,o=_(n.width,n.dimensionAbbr)/2,i=_(a.width,a.dimensionAbbr)/2;a.positionX=s+o+i}},calcCurrentPositionX(e,t){const n=this.items.at(-1);return n?(n.positionX||(n.positionX=0),n.positionX+_(n.width,n.dimensionAbbr)/2+_(e,t)/2):0},removeItem(e){const t=M();this.items.splice(e,1),t.clearScene(),this.repositionItems(),t.initScene()}}}),M=T("canvas",{state:()=>({camera:new ue(100),controls:{}}),actions:{updateCamera(){const e=x();if(e.items.length>1){const t=e.middlePositionX/3,n=e.maxHeight,a=e.maxLength;this.camera.position.set(t,n,a);const s=t+1,o=n-1,i=a-1;this.camera.lookAt(s,o,i),this.controls.target=new X(s,o,i)}if(e.items.length===1){const t=-e.maxWidth,n=e.maxHeight,a=e.maxLength;this.camera.position.set(t,n,a);const s=0,o=0,i=0;this.camera.lookAt(s,o,i),this.controls.target=new X(s,o,i);return}},initOrbitControls(e,t){this.controls=new me(e,t),this.controls.maxDistance=1/0},initScene(){const e=x();if(!e.items.length)return;const t=[];for(const n of e.items)t.push(e.createItem(n));y.add(...t),this.updateCamera()},clearScene(){y.clear()}}}),we=w({__name:"TheCanvas",setup(e){const t=u(),n=M();return k(()=>{if(t.value===void 0)throw new Error("Canvas not found");const a=n.camera,s=new _e({canvas:t.value});s.setPixelRatio(Math.min(window.devicePixelRatio,2)),s.render(y,a),n.initOrbitControls(a,s.domElement),n.initScene();function o(){const c=s.domElement,r=c.clientWidth,m=c.clientHeight;s.setSize(r,m,!1),a.aspect=r/m,a.updateProjectionMatrix()}window.addEventListener("DOMContentLoaded",o);function i(){const c=s.domElement,r=c.clientWidth,m=c.clientHeight;(c.width!==r||c.height!==m)&&(s.setSize(r,m,!1),a.aspect=r/m,a.updateProjectionMatrix())}window.addEventListener("resize",i);function f(){requestAnimationFrame(f),s.render(y,a)}f()}),(a,s)=>(l(),d("canvas",{id:"canvas",ref_key:"canvas",ref:t},null,512))}});const p=(e,t)=>{const n=e.__vccOpts||e;for(const[a,s]of t)n[a]=s;return n},ye=p(we,[["__scopeId","data-v-667ea17d"]]),xe={class:"base-input"},Ie=["id","placeholder"],Se=["for"],Ce=w({__name:"BaseInput",props:{label:{type:String,required:!0},placeholder:{type:String,required:!0}},emits:["change"],setup(e,{expose:t,emit:n}){const s=u(e.label.split(" ").join("__").toLocaleLowerCase()),o=u("");P(o,()=>{n("change",o.value)});function i(){o.value=""}return t({clear:i}),(f,c)=>(l(),d("div",xe,[F(b("input",{id:s.value,"onUpdate:modelValue":c[0]||(c[0]=r=>o.value=r),type:"text",class:"base-input__input",placeholder:e.placeholder},null,8,Ie),[[Y,o.value]]),b("label",{class:"base-input__label",for:s.value},g(e.label),9,Se)]))}});const E=p(Ce,[["__scopeId","data-v-db41178a"]]),Ae=w({__name:"BaseButton",emits:["click"],setup(e){return(t,n)=>(l(),d("button",{class:"base-button",type:"button",onClick:n[0]||(n[0]=a=>t.$emit("click"))},[N(t.$slots,"default",{},void 0,!0)]))}});const W=p(Ae,[["__scopeId","data-v-c0914907"]]),Be=["value"],Le=w({__name:"BaseSelect",props:{options:null},emits:["toogle"],setup(e,{emit:t}){const n=u("mm");return P(n,()=>{t("toogle",n.value)}),(a,s)=>F((l(),d("select",{"onUpdate:modelValue":s[0]||(s[0]=o=>n.value=o),class:"base-select",name:"dimensionAbbreviation"},[(l(!0),d(O,null,q(e.options,o=>(l(),d("option",{key:o.value,value:o.value,class:"base-select__option"},g(o.text),9,Be))),128))],512)),[[J,n.value]])}});const Me=p(Le,[["__scopeId","data-v-1ced38cc"]]),ke={method:"dialog"},Pe={class:"text"},$e=w({__name:"TheModal",emits:["close"],setup(e,{emit:t}){const n=u();function a(){var o;(o=n.value)==null||o.close(),t("close")}function s(o){o.target==n.value&&a()}return k(()=>{var o;(o=n.value)==null||o.showModal(),window.addEventListener("click",s)}),K(()=>{var o;(o=n.value)==null||o.close(),window.removeEventListener("click",s)}),(o,i)=>(l(),d("dialog",{ref_key:"modal",ref:n,class:"modal"},[b("form",ke,[b("span",Pe,[N(o.$slots,"default",{},void 0,!0)]),h(W,{class:"button-close",type:"button",onClick:a},{default:I(()=>[L("Close")]),_:1})])],512))}});const De=p($e,[["__scopeId","data-v-39e80f7d"]]),Xe={class:"menu"},Ee=w({__name:"TheMenu",setup(e){const t=u(!1);function n(){t.value=!0}function a(){t.value=!1}const s=u("mm");function o(v){s.value=v}const i=[{text:"millimeter",value:"mm"},{text:"centimeter",value:"cm"},{text:"meter",value:"m"},{text:"inch",value:"in"},{text:"feet",value:"ft"},{text:"yards",value:"ya"},{text:"miles",value:"mi"}],f=u(""),c=u(),r=u(""),m=u();function C(v){f.value=v}function A(v){r.value=v}const $=x();function H(){if(!f.value||!r.value){n();return}const v=be(r.value);if(!v)return;const D=f.value,{height:j,width:G,length:R}=v,Z=s.value;let B;do B=ve();while(B===$.lastItemColor);const U={name:D,width:G,height:j,length:R,color:B,dimensionAbbr:Z};$.addItem(U),c.value.clear(),m.value.clear()}return(v,D)=>(l(),d("div",Xe,[h(E,{ref_key:"inputItemName",ref:c,label:"Item name",placeholder:"box 1",onChange:C},null,512),h(E,{ref_key:"inputItemParams",ref:m,label:"Item params",placeholder:"width, height, length",onChange:A},null,512),h(Me,{options:S(i),onToogle:o},null,8,["options"]),h(W,{onClick:H},{default:I(()=>[L(" Add item")]),_:1}),t.value?(l(),V(De,{key:0,onClose:a},{default:I(()=>[L(" Enter the object name, width, height and length ")]),_:1})):z("",!0)]))}});const Te=p(Ee,[["__scopeId","data-v-8452542c"]]),Fe={},Ne={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 320 512"},Oe=b("path",{d:"M310.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L160 210.7 54.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L114.7 256 9.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L160 301.3 265.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L205.3 256 310.6 150.6z"},null,-1),qe=[Oe];function Ve(e,t){return l(),d("svg",Ne,qe)}const ze=p(Fe,[["render",Ve]]),We={class:"item"},He=w({__name:"ItemsListItem",props:{index:{type:Number,required:!0},height:{type:Number,required:!0},width:{type:Number,required:!0},length:{type:Number,required:!0},name:{type:String,required:!0},color:{type:String,required:!0},dimensionAbbr:{type:String,required:!0}},setup(e){const t=e;ee(o=>({47419595:S(a)}));const n=x(),a=Q(()=>t.color);function s(){n.removeItem(t.index)}return(o,i)=>(l(),d("div",We,[b("div",null,g(e.name),1),b("div",null," ("+g(e.height)+g(e.dimensionAbbr)+" x "+g(e.width)+g(e.dimensionAbbr)+" x "+g(e.length)+g(e.dimensionAbbr)+") ",1),b("button",{type:"button",class:"button-delete","aria-label":"delete item",onClick:s},[h(ze,{class:"button-delete__icon","aria-hidden":"true",tabindex:"-1"})])]))}});const je=p(He,[["__scopeId","data-v-b9431ae7"]]),Ge={key:0,class:"item-list"},Re=w({__name:"ItemsList",setup(e){const t=x();return(n,a)=>S(t).items.length?(l(),d("section",Ge,[h(te,null,{default:I(()=>[(l(!0),d(O,null,q(S(t).items,(s,o)=>(l(),V(je,{key:o,index:o,height:s.height,width:s.width,length:s.length,name:s.name,color:s.color,"dimension-abbr":s.dimensionAbbr},null,8,["index","height","width","length","name","color","dimension-abbr"]))),128))]),_:1})])):z("",!0)}});const Ze=p(Re,[["__scopeId","data-v-5aa1e0ff"]]);function Ue(){const e=u(!1),t=window.matchMedia("(prefers-color-scheme: dark)");return k(()=>{t.matches&&(e.value=!0),t.addEventListener("change",({matches:n})=>{n?e.value=!0:e.value=!1})}),e}function Ye(){const e=Ue();return P(e,()=>{e.value?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}),e}const Je={class:"intro"},Ke={class:"menu-container"},Qe=w({__name:"App",setup(e){return Ye(),(t,n)=>(l(),d("main",Je,[h(ye),b("div",Ke,[h(Te),h(Ze)])]))}});const et=p(Qe,[["__scopeId","data-v-2e1ad122"]]);ne(et).use(se()).mount("#app");
