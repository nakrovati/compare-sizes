import{k as b,r as v,l as $,p as r,q as l,w as F,v as X,x as j,y as _,z as f,A as E,B as R,C as Z,F as P,D,E as U,G as A,H as g,I,T as J,J as C,K as T,h as K,L as Y,u as S,M as Q}from"./vendor.vue-651376cf.js";import{d as O,c as ee}from"./vendor.pinia-05094e5f.js";import{S as te,B as ne,M as se,a as oe,E as ie,L as ae,b as re,P as ce,V as M,O as le,W as de}from"./vendor.three-68383a88.js";import{u as ue}from"./vendor.@vueuse-f48aff9e.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function s(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerpolicy&&(i.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?i.credentials="include":n.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(n){if(n.ep)return;n.ep=!0;const i=s(n);fetch(n.href,i)}})();const y=new te,me=["#9D44B5","#34312D","#B5446E","#80B192","#8D918B","#CE84AD","#210124","#00A878","#750D37","#345995","#9B2915","#50A2A7","#0496FF","#05204A","#558564","#5AB1BB","#34D1BF","#C492B1","#E9B44C","#57C4E5","#84A9C0","#9DACFF","#FFB400","#6FFFE9","#B8B42D"],_e={colors:me};function he(){const e=_e.colors;return e[Math.floor(Math.random()*e.length)]}function pe(e){return+e.replace(/#/,"0x")}function m(e,t){switch(t){case"mm":return e;case"cm":return e*10;case"m":return e*1e3;case"in":return+(e*25.4).toFixed(4);case"ft":return+(e*304.8).toFixed(4);case"ya":return+(e*914.4).toFixed(4);case"mi":return+(e*1609344).toFixed(4);default:return e}}const x=O("items",{state:()=>({items:ue("drawable-items",[])}),getters:{maxWidth:e=>{if(!e.items.length)return 0;const t=[];for(const s of e.items)t.push(m(s.width,s.dimensionAbbr));return Math.max(...t)},maxHeight:e=>{if(!e.items.length)return 0;const t=[];for(const s of e.items)t.push(m(s.height,s.dimensionAbbr));return Math.max(...t)},maxLength:e=>{if(!e.items.length)return 0;const t=[];for(const s of e.items)t.push(m(s.height,s.dimensionAbbr));return Math.max(...t)},middlePositionX:e=>{var o,n;if(!e.items.length||e.items.length===1)return 0;const t=((o=e.items.at(0))==null?void 0:o.positionX)??0,s=((n=e.items.at(-1))==null?void 0:n.positionX)??0;return(t+s)/2}},actions:{createItem(e){const t=m(e.width,e.dimensionAbbr),s=m(e.height,e.dimensionAbbr),o=m(e.length,e.dimensionAbbr),n=new ne(t,s,o),i=new se({color:pe(e.color)}),a=new oe(n,i);a.name=e.name,a.position.setX(e.positionX??0);const c=new ie(a.geometry),d=new ae({color:16777215}),u=new re(c,d);return a.add(u),a},addItem(e){e.positionX=this.calcCurrentPositionX(e.width,e.dimensionAbbr);const t=e;this.items.push(t);const s=this.createItem(e);y.add(s),B().updateCamera()},repositionItems(){const e=this.items;for(let t=0;t<e.length;t++){const s=e[t-1],o=e[t];if(o===e[0]){o.positionX=0;continue}const n=s.positionX??0,i=m(s.width,s.dimensionAbbr)/2,a=m(o.width,o.dimensionAbbr)/2;o.positionX=n+i+a}},calcCurrentPositionX(e,t){const s=this.items.at(-1);return s?(s.positionX||(s.positionX=0),s.positionX+m(s.width,s.dimensionAbbr)/2+m(e,t)/2):0},removeItem(e){const t=B();this.items.splice(e,1),t.clearScene(),this.repositionItems(),t.initScene()}}}),B=O("canvas",{state:()=>({camera:new ce(100),controls:{}}),actions:{updateCamera(){const e=x();if(e.items.length>1){const t=e.middlePositionX/3,s=e.maxHeight,o=e.maxLength;this.camera.position.set(t,s,o);const n=t+1,i=s-1,a=o-1;this.camera.lookAt(n,i,a),this.controls.target=new M(n,i,a)}if(e.items.length===1){const t=-e.maxWidth,s=e.maxHeight,o=e.maxLength;this.camera.position.set(t,s,o);const n=0,i=0,a=0;this.camera.lookAt(n,i,a),this.controls.target=new M(n,i,a);return}},initOrbitControls(e,t){this.controls=new le(e,t),this.controls.maxDistance=1/0},initScene(){const e=x();if(!e.items.length)return;const t=[];for(const s of e.items)t.push(e.createItem(s));y.add(...t),this.updateCamera()},clearScene(){y.clear()}}}),fe=b({__name:"TheCanvas",setup(e){const t=v(),s=B(),o=s.camera;return $(()=>{if(t.value===void 0)throw new Error("Canvas not found");const n=new de({canvas:t.value});n.setPixelRatio(Math.min(window.devicePixelRatio,2)),n.render(y,o),s.initOrbitControls(o,n.domElement),s.initScene();function i(){const c=n.domElement,d=c.clientWidth,u=c.clientHeight;(c.width!==d||c.height!==u)&&(n.setSize(d,u,!1),o.aspect=d/u,o.updateProjectionMatrix())}window.addEventListener("DOMContentLoaded",()=>{const c=n.domElement,d=c.clientWidth,u=c.clientHeight;n.setSize(d,u,!1),o.aspect=d/u,o.updateProjectionMatrix()}),window.addEventListener("resize",i);function a(){requestAnimationFrame(a),n.render(y,o)}a()}),(n,i)=>(r(),l("canvas",{id:"canvas",ref_key:"canvas",ref:t},null,512))}});const h=(e,t)=>{const s=e.__vccOpts||e;for(const[o,n]of t)s[o]=n;return s},ve=h(fe,[["__scopeId","data-v-16959db8"]]),ge={class:"input-container"},be=["id","placeholder"],ye=["for"],xe=b({__name:"BaseInput",props:{label:{type:String,required:!0},placeholder:{type:String,required:!0}},emits:["change"],setup(e,{emit:t}){const o=v(e.label.split(" ").join("__").toLocaleLowerCase()),n=v("");return F(n,()=>{t("change",n.value)}),(i,a)=>(r(),l("div",ge,[X(_("input",{id:o.value,"onUpdate:modelValue":a[0]||(a[0]=c=>n.value=c),type:"text",class:"input",placeholder:e.placeholder,required:""},null,8,be),[[j,n.value]]),_("label",{class:"input__label",for:o.value},f(e.label),9,ye)]))}});const k=h(xe,[["__scopeId","data-v-71d6dcb3"]]),we=b({__name:"BaseButton",props:{wide:{type:Boolean,default:!1}},emits:["click"],setup(e,{emit:t}){function s(){t("click")}return(o,n)=>(r(),l("button",{class:R(["button",{wide:e.wide}]),type:"button",onClick:s},[E(o.$slots,"default",{},void 0,!0)],2))}});const q=h(we,[["__scopeId","data-v-77fef1d0"]]),Ie=["value"],Ce=b({__name:"BaseSelect",props:{options:null},emits:["toogle"],setup(e,{emit:t}){const s=v("mm");return F(s,()=>{t("toogle",s.value)}),(o,n)=>X((r(),l("select",{"onUpdate:modelValue":n[0]||(n[0]=i=>s.value=i),class:"select",name:"dimensionAbbreviation"},[(r(!0),l(P,null,D(e.options,i=>(r(),l("option",{key:i.value,value:i.value,class:"select__option"},f(i.text),9,Ie))),128))],512)),[[Z,s.value]])}});const Se=h(Ce,[["__scopeId","data-v-9dd83196"]]),Be={ref:"modal",class:"modal"},Ae={class:"text"},Le=b({__name:"TheModal",emits:["close"],setup(e,{emit:t}){const s=v(),o=()=>{t("close")};function n(i){i.target==s.value&&o()}return $(()=>{window.addEventListener("click",n)}),U(()=>{window.removeEventListener("click",n)}),(i,a)=>(r(),A(J,{to:"body"},[_("div",{ref_key:"modalOutside",ref:s,class:"modal-outside"},[_("div",Be,[_("span",Ae,[E(i.$slots,"default",{},void 0,!0)]),g(q,{class:"button-close",type:"button",onClick:o},{default:I(()=>[C("Close")]),_:1})],512)],512)]))}});const Me=h(Le,[["__scopeId","data-v-cd84380e"]]);function ke(e){const t=/(\d+(?:\.\d+)?), ?(\d+(?:\.\d+)?), ?(\d+(?:\.\d+)?)/,s=e.match(t);if(!!s)return{data:s[0],width:+s[1],height:+s[2],length:+s[3]}}const $e={class:"menu"},Fe=b({__name:"TheMenu",setup(e){const t=v(!1),s=v("mm"),o=v(""),n=v(""),i=[{text:"millimeter",value:"mm"},{text:"centimeter",value:"cm"},{text:"meter",value:"m"},{text:"inch",value:"in"},{text:"feet",value:"ft"},{text:"yards",value:"ya"},{text:"miles",value:"mi"}];function a(p){s.value=p}function c(p){o.value=p}function d(p){n.value=p}const u=x();function N(){if(!o.value||!n.value){t.value=!0;return}const p=ke(n.value);if(!p)return;const w=o.value,{height:L,width:V,length:z}=p,H=he(),W=s.value,G={name:w,width:V,height:L,length:z,color:H,dimensionAbbr:W};u.addItem(G),o.value="",n.value=""}return(p,w)=>(r(),l("div",$e,[g(k,{label:"Item name",placeholder:"box 1",onChange:c}),g(k,{label:"Item params",placeholder:"width, height, length",onChange:d}),g(Se,{options:i,onToogle:a}),g(q,{onClick:N},{default:I(()=>[C(" Add item")]),_:1}),t.value?(r(),A(Me,{key:0,onClose:w[0]||(w[0]=L=>t.value=!t.value)},{default:I(()=>[C(" Enter the object name, width, height and length ")]),_:1})):T("",!0)]))}});const Xe=h(Fe,[["__scopeId","data-v-94e0c4ef"]]),Ee={},Pe={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 320 512"},De=_("path",{d:"M310.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L160 210.7 54.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L114.7 256 9.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L160 301.3 265.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L205.3 256 310.6 150.6z"},null,-1),Te=[De];function Oe(e,t){return r(),l("svg",Pe,Te)}const qe=h(Ee,[["render",Oe]]),Ne={class:"item"},Ve=b({__name:"ItemsListItem",props:{index:{type:Number,required:!0},height:{type:Number,required:!0},width:{type:Number,required:!0},length:{type:Number,required:!0},name:{type:String,required:!0},color:{type:String,required:!0},dimensionAbbr:{type:String,required:!0}},setup(e){const t=e;Y(i=>({"39318a33":S(o)}));const s=x(),o=K(()=>t.color);function n(){s.removeItem(t.index)}return(i,a)=>(r(),l("div",Ne,[_("div",null,f(e.name),1),_("div",null," ("+f(e.height)+f(e.dimensionAbbr)+" x "+f(e.width)+f(e.dimensionAbbr)+" x "+f(e.length)+f(e.dimensionAbbr)+") ",1),_("button",{type:"button",class:"button-delete","aria-label":"delete item",onClick:n},[g(qe,{class:"button-delete__icon","aria-hidden":"true",tabindex:"-1"})])]))}});const ze=h(Ve,[["__scopeId","data-v-f988d8f9"]]),He={key:0,class:"item-list"},We=b({__name:"ItemsList",setup(e){const{items:t}=x();return(s,o)=>S(t).length?(r(),l("section",He,[(r(!0),l(P,null,D(S(t),(n,i)=>(r(),A(ze,{key:i,index:i,height:n.height,width:n.width,length:n.length,name:n.name,color:n.color,"dimension-abbr":n.dimensionAbbr},null,8,["index","height","width","length","name","color","dimension-abbr"]))),128))])):T("",!0)}});const Ge=h(We,[["__scopeId","data-v-8197ae98"]]),je={class:"intro"},Re={class:"menu-container"},Ze=b({__name:"App",setup(e){return window.matchMedia("(prefers-color-scheme: dark)").matches&&document.documentElement.classList.add("dark"),(t,s)=>(r(),l("main",je,[g(ve),_("div",Re,[g(Xe),g(Ge)])]))}});const Ue=h(Ze,[["__scopeId","data-v-3f5d9154"]]);Q(Ue).use(ee()).mount("#app");
