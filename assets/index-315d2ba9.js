import{k as b,r as m,l as $,p as r,q as u,w as F,v as X,x as Z,y as h,z as v,A as P,B as U,F as E,C as D,D as J,E as B,G as g,H as I,T as K,I as C,J as T,h as Y,K as Q,u as S,L as ee}from"./vendor.vue-692fa963.js";import{d as N,c as te}from"./vendor.pinia-57773644.js";import{S as ne,B as se,M as oe,a as ie,E as ae,L as re,b as ce,P as le,V as M,O as de,W as ue}from"./vendor.three-500559b7.js";import{u as me}from"./vendor.@vueuse-b2b47fb4.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerpolicy&&(o.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?o.credentials="include":s.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();const y=new ne,_e=["#9D44B5","#34312D","#B5446E","#80B192","#8D918B","#CE84AD","#210124","#00A878","#750D37","#345995","#9B2915","#50A2A7","#0496FF","#05204A","#558564","#5AB1BB","#34D1BF","#C492B1","#E9B44C","#57C4E5","#84A9C0","#9DACFF","#FFB400","#6FFFE9","#B8B42D"],he={colors:_e};function pe(){const e=he.colors;return e[Math.floor(Math.random()*e.length)]}function fe(e){return+e.replace(/#/,"0x")}function _(e,t){switch(t){case"mm":return e;case"cm":return e*10;case"m":return e*1e3;case"in":return+(e*25.4).toFixed(4);case"ft":return+(e*304.8).toFixed(4);case"ya":return+(e*914.4).toFixed(4);case"mi":return+(e*1609344).toFixed(4);default:return e}}const x=N("items",{state:()=>({items:me("drawable-items",[])}),getters:{maxWidth:e=>{if(!e.items.length)return 0;const t=[];for(const n of e.items)t.push(_(n.width,n.dimensionAbbr));return Math.max(...t)},maxHeight:e=>{if(!e.items.length)return 0;const t=[];for(const n of e.items)t.push(_(n.height,n.dimensionAbbr));return Math.max(...t)},maxLength:e=>{if(!e.items.length)return 0;const t=[];for(const n of e.items)t.push(_(n.height,n.dimensionAbbr));return Math.max(...t)},middlePositionX:e=>{var i,s;if(!e.items.length||e.items.length===1)return 0;const t=((i=e.items.at(0))==null?void 0:i.positionX)??0,n=((s=e.items.at(-1))==null?void 0:s.positionX)??0;return(t+n)/2}},actions:{createItem(e){const t=_(e.width,e.dimensionAbbr),n=_(e.height,e.dimensionAbbr),i=_(e.length,e.dimensionAbbr),s=new se(t,n,i),o=new oe({color:fe(e.color)}),a=new ie(s,o);a.name=e.name,a.position.setX(e.positionX??0);const l=new ae(a.geometry),c=new re({color:16777215}),d=new ce(l,c);return a.add(d),a},addItem(e){e.positionX=this.calcCurrentPositionX(e.width,e.dimensionAbbr);const t=e;this.items.push(t);const n=this.createItem(e);y.add(n),A().updateCamera()},repositionItems(){const e=this.items;for(let t=0;t<e.length;t++){const n=e[t-1],i=e[t];if(i===e[0]){i.positionX=0;continue}const s=n.positionX??0,o=_(n.width,n.dimensionAbbr)/2,a=_(i.width,i.dimensionAbbr)/2;i.positionX=s+o+a}},calcCurrentPositionX(e,t){const n=this.items.at(-1);return n?(n.positionX||(n.positionX=0),n.positionX+_(n.width,n.dimensionAbbr)/2+_(e,t)/2):0},removeItem(e){const t=A();this.items.splice(e,1),t.clearScene(),this.repositionItems(),t.initScene()}}}),A=N("canvas",{state:()=>({camera:new le(100),controls:{}}),actions:{updateCamera(){const e=x();if(e.items.length>1){const t=e.middlePositionX/3,n=e.maxHeight,i=e.maxLength;this.camera.position.set(t,n,i);const s=t+1,o=n-1,a=i-1;this.camera.lookAt(s,o,a),this.controls.target=new M(s,o,a)}if(e.items.length===1){const t=-e.maxWidth,n=e.maxHeight,i=e.maxLength;this.camera.position.set(t,n,i);const s=0,o=0,a=0;this.camera.lookAt(s,o,a),this.controls.target=new M(s,o,a);return}},initOrbitControls(e,t){this.controls=new de(e,t),this.controls.maxDistance=1/0},initScene(){const e=x();if(!e.items.length)return;const t=[];for(const n of e.items)t.push(e.createItem(n));y.add(...t),this.updateCamera()},clearScene(){y.clear()}}}),ve=b({__name:"TheCanvas",setup(e){const t=m(),n=A(),i=n.camera;return $(()=>{if(t.value===void 0)throw new Error("Canvas not found");const s=new ue({canvas:t.value});s.setPixelRatio(Math.min(window.devicePixelRatio,2)),s.render(y,i),n.initOrbitControls(i,s.domElement),n.initScene();function o(){const l=s.domElement,c=l.clientWidth,d=l.clientHeight;(l.width!==c||l.height!==d)&&(s.setSize(c,d,!1),i.aspect=c/d,i.updateProjectionMatrix())}window.addEventListener("DOMContentLoaded",()=>{const l=s.domElement,c=l.clientWidth,d=l.clientHeight;s.setSize(c,d,!1),i.aspect=c/d,i.updateProjectionMatrix()}),window.addEventListener("resize",o);function a(){requestAnimationFrame(a),s.render(y,i)}a()}),(s,o)=>(r(),u("canvas",{id:"canvas",ref_key:"canvas",ref:t},null,512))}});const p=(e,t)=>{const n=e.__vccOpts||e;for(const[i,s]of t)n[i]=s;return n},ge=p(ve,[["__scopeId","data-v-16959db8"]]),be={class:"base-input"},ye=["id","placeholder"],xe=["for"],we=b({__name:"BaseInput",props:{label:{type:String,required:!0},placeholder:{type:String,required:!0}},emits:["change"],setup(e,{expose:t,emit:n}){const s=m(e.label.split(" ").join("__").toLocaleLowerCase()),o=m("");F(o,()=>{n("change",o.value)});function a(){o.value=""}return t({clear:a}),(l,c)=>(r(),u("div",be,[X(h("input",{id:s.value,"onUpdate:modelValue":c[0]||(c[0]=d=>o.value=d),type:"text",class:"base-input__input",placeholder:e.placeholder},null,8,ye),[[Z,o.value]]),h("label",{class:"base-input__label",for:s.value},v(e.label),9,xe)]))}});const k=p(we,[["__scopeId","data-v-73887f94"]]),Ie=b({__name:"BaseButton",emits:["click"],setup(e,{emit:t}){function n(){t("click")}return(i,s)=>(r(),u("button",{class:"base-button",type:"button",onClick:n},[P(i.$slots,"default",{},void 0,!0)]))}});const O=p(Ie,[["__scopeId","data-v-2a950645"]]),Ce=["value"],Se=b({__name:"BaseSelect",props:{options:null},emits:["toogle"],setup(e,{emit:t}){const n=m("mm");return F(n,()=>{t("toogle",n.value)}),(i,s)=>X((r(),u("select",{"onUpdate:modelValue":s[0]||(s[0]=o=>n.value=o),class:"base-select",name:"dimensionAbbreviation"},[(r(!0),u(E,null,D(e.options,o=>(r(),u("option",{key:o.value,value:o.value,class:"base-select__option"},v(o.text),9,Ce))),128))],512)),[[U,n.value]])}});const Ae=p(Se,[["__scopeId","data-v-05b8ef6d"]]),Be={ref:"modal",class:"modal"},Le={class:"text"},Me=b({__name:"TheModal",emits:["close"],setup(e,{emit:t}){const n=m(),i=()=>{t("close")};function s(o){o.target==n.value&&i()}return $(()=>{window.addEventListener("click",s)}),J(()=>{window.removeEventListener("click",s)}),(o,a)=>(r(),B(K,{to:"body"},[h("div",{ref_key:"modalOutside",ref:n,class:"modal-outside"},[h("div",Be,[h("span",Le,[P(o.$slots,"default",{},void 0,!0)]),g(O,{class:"button-close",type:"button",onClick:i},{default:I(()=>[C("Close")]),_:1})],512)],512)]))}});const ke=p(Me,[["__scopeId","data-v-cd84380e"]]);function $e(e){const t=/(\d+(?:\.\d+)?), ?(\d+(?:\.\d+)?), ?(\d+(?:\.\d+)?)/,n=e.match(t);if(n)return{data:n[0],width:+n[1],height:+n[2],length:+n[3]}}const Fe={class:"menu"},Xe=b({__name:"TheMenu",setup(e){const t=m(!1),n=m("mm"),i=m(""),s=m(),o=m(""),a=m(),l=[{text:"millimeter",value:"mm"},{text:"centimeter",value:"cm"},{text:"meter",value:"m"},{text:"inch",value:"in"},{text:"feet",value:"ft"},{text:"yards",value:"ya"},{text:"miles",value:"mi"}];function c(f){n.value=f}function d(f){i.value=f}function q(f){o.value=f}const V=x();function H(){if(!i.value||!o.value){t.value=!0;return}const f=$e(o.value);if(!f)return;const w=i.value,{height:L,width:W,length:z}=f,G=pe(),j=n.value,R={name:w,width:W,height:L,length:z,color:G,dimensionAbbr:j};V.addItem(R),s.value.clear(),a.value.clear()}return(f,w)=>(r(),u("div",Fe,[g(k,{ref_key:"inputItemName",ref:s,label:"Item name",placeholder:"box 1",onChange:d},null,512),g(k,{ref_key:"inputItemParams",ref:a,label:"Item params",placeholder:"width, height, length",onChange:q},null,512),g(Ae,{options:l,onToogle:c}),g(O,{onClick:H},{default:I(()=>[C(" Add item")]),_:1}),t.value?(r(),B(ke,{key:0,onClose:w[0]||(w[0]=L=>t.value=!t.value)},{default:I(()=>[C(" Enter the object name, width, height and length ")]),_:1})):T("",!0)]))}});const Pe=p(Xe,[["__scopeId","data-v-6bfb2c99"]]),Ee={},De={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 320 512"},Te=h("path",{d:"M310.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L160 210.7 54.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L114.7 256 9.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L160 301.3 265.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L205.3 256 310.6 150.6z"},null,-1),Ne=[Te];function Oe(e,t){return r(),u("svg",De,Ne)}const qe=p(Ee,[["render",Oe]]),Ve={class:"item"},He=b({__name:"ItemsListItem",props:{index:{type:Number,required:!0},height:{type:Number,required:!0},width:{type:Number,required:!0},length:{type:Number,required:!0},name:{type:String,required:!0},color:{type:String,required:!0},dimensionAbbr:{type:String,required:!0}},setup(e){const t=e;Q(o=>({"39318a33":S(i)}));const n=x(),i=Y(()=>t.color);function s(){n.removeItem(t.index)}return(o,a)=>(r(),u("div",Ve,[h("div",null,v(e.name),1),h("div",null," ("+v(e.height)+v(e.dimensionAbbr)+" x "+v(e.width)+v(e.dimensionAbbr)+" x "+v(e.length)+v(e.dimensionAbbr)+") ",1),h("button",{type:"button",class:"button-delete","aria-label":"delete item",onClick:s},[g(qe,{class:"button-delete__icon","aria-hidden":"true",tabindex:"-1"})])]))}});const We=p(He,[["__scopeId","data-v-f988d8f9"]]),ze={key:0,class:"item-list"},Ge=b({__name:"ItemsList",setup(e){const{items:t}=x();return(n,i)=>S(t).length?(r(),u("section",ze,[(r(!0),u(E,null,D(S(t),(s,o)=>(r(),B(We,{key:o,index:o,height:s.height,width:s.width,length:s.length,name:s.name,color:s.color,"dimension-abbr":s.dimensionAbbr},null,8,["index","height","width","length","name","color","dimension-abbr"]))),128))])):T("",!0)}});const je=p(Ge,[["__scopeId","data-v-8197ae98"]]),Re={class:"intro"},Ze={class:"menu-container"},Ue=b({__name:"App",setup(e){return window.matchMedia("(prefers-color-scheme: dark)").matches&&document.documentElement.classList.add("dark"),(t,n)=>(r(),u("main",Re,[g(ge),h("div",Ze,[g(Pe),g(je)])]))}});const Je=p(Ue,[["__scopeId","data-v-8546f835"]]);ee(Je).use(te()).mount("#app");
