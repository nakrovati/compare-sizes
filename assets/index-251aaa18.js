import{k as M,l as v,r as g,p as F,q as d,v as _,x as W,w as G,y as C,z as j,F as X,A as E,B as f,C as R,D as S,E as c,G as b,H as I,I as A,T as U,J as k,K as D,L as Z,M as J,N as K,j as Y,u as B,O as Q}from"./vendor.vue-05ca22f6.js";import{d as P,c as ee}from"./vendor.pinia-9fce735d.js";import{S as te,B as ne,M as se,a as oe,E as ie,L as ae,b as re,P as ce,V as $,O as le,W as de}from"./vendor.three-68383a88.js";import{u as me}from"./vendor.@vueuse-5b5762c1.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerpolicy&&(o.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?o.credentials="include":s.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();const h=(e,t)=>{const n=e.__vccOpts||e;for(const[i,s]of t)n[i]=s;return n},ue={};function _e(e,t){return M(e.$slots,"default")}const he=h(ue,[["render",_e]]),x=new te,pe=["#9D44B5","#34312D","#B5446E","#80B192","#8D918B","#CE84AD","#210124","#00A878","#750D37","#345995","#9B2915","#50A2A7","#0496FF","#05204A","#558564","#5AB1BB","#34D1BF","#C492B1","#E9B44C","#57C4E5","#84A9C0","#9DACFF","#FFB400","#6FFFE9","#B8B42D"],fe={colors:pe};function ve(){const e=fe.colors;return e[Math.floor(Math.random()*e.length)]}function ge(e){return+e.replace(/#/,"0x")}function u(e,t){switch(t){case"mm":return e;case"cm":return e*10;case"m":return e*1e3;case"in":return+(e*25.4).toFixed(4);case"ft":return+(e*304.8).toFixed(4);case"ya":return+(e*914.4).toFixed(4);case"mi":return+(e*1609344).toFixed(4);default:return e}}const y=P("items",{state:()=>({items:me("drawable-items",[])}),getters:{maxWidth:e=>{if(!e.items.length)return 0;const t=[];for(const n of e.items)t.push(u(n.width,n.dimensionAbbr));return Math.max(...t)},maxHeight:e=>{if(!e.items.length)return 0;const t=[];for(const n of e.items)t.push(u(n.height,n.dimensionAbbr));return Math.max(...t)},maxLength:e=>{if(!e.items.length)return 0;const t=[];for(const n of e.items)t.push(u(n.height,n.dimensionAbbr));return Math.max(...t)},middlePositionX:e=>{var i,s;if(!e.items.length||e.items.length===1)return 0;const t=((i=e.items.at(0))==null?void 0:i.positionX)??0,n=((s=e.items.at(-1))==null?void 0:s.positionX)??0;return(t+n)/2}},actions:{createItem(e){const t=u(e.width,e.dimensionAbbr),n=u(e.height,e.dimensionAbbr),i=u(e.length,e.dimensionAbbr),s=new ne(t,n,i),o=new se({color:ge(e.color)}),a=new oe(s,o);a.name=e.name,a.position.setX(e.positionX??0);const r=new ie(a.geometry),m=new ae({color:16777215}),l=new re(r,m);return a.add(l),a},addItem(e){e.positionX=this.calcCurrentPositionX(e.width,e.dimensionAbbr);const t=e;this.items.push(t);const n=this.createItem(e);x.add(n),L().updateCamera()},repositionItems(){const e=this.items;for(let t=0;t<e.length;t++){const n=e[t-1],i=e[t];if(i===e[0]){i.positionX=0;continue}const s=n.positionX??0,o=u(n.width,n.dimensionAbbr)/2,a=u(i.width,i.dimensionAbbr)/2;i.positionX=s+o+a}},calcCurrentPositionX(e,t){const n=this.items.at(-1);return n?(n.positionX||(n.positionX=0),n.positionX+u(n.width,n.dimensionAbbr)/2+u(e,t)/2):0},removeItem(e){const t=L();this.items.splice(e,1),t.clearScene(),this.repositionItems(),t.initScene()}}}),L=P("canvas",{state:()=>({camera:new ce(100),controls:{}}),actions:{updateCamera(){const e=y();if(e.items.length>1){const t=e.middlePositionX/3,n=e.maxHeight,i=e.maxLength;this.camera.position.set(t,n,i);const s=t+1,o=n-1,a=i-1;this.camera.lookAt(s,o,a),this.controls.target=new $(s,o,a)}if(e.items.length===1){const t=-e.maxWidth,n=e.maxHeight,i=e.maxLength;this.camera.position.set(t,n,i);const s=0,o=0,a=0;this.camera.lookAt(s,o,a),this.controls.target=new $(s,o,a);return}},initOrbitControls(e,t){this.controls=new le(e,t),this.controls.maxDistance=1/0},initScene(){const e=y();if(!e.items.length)return;const t=[];for(const n of e.items)t.push(e.createItem(n));x.add(...t),this.updateCamera()},clearScene(){x.clear()}}}),be=v({__name:"TheCanvas",setup(e){const t=g(),n=L(),i=n.camera;return F(()=>{if(t.value===void 0)throw new Error("Canvas not found");const s=new de({canvas:t.value});s.setPixelRatio(Math.min(window.devicePixelRatio,2)),s.render(x,i),n.initOrbitControls(i,s.domElement),n.initScene();function o(){const r=s.domElement,m=r.clientWidth,l=r.clientHeight;(r.width!==m||r.height!==l)&&(s.setSize(m,l,!1),i.aspect=m/l,i.updateProjectionMatrix())}window.addEventListener("DOMContentLoaded",()=>{const r=s.domElement,m=r.clientWidth,l=r.clientHeight;s.setSize(m,l,!1),i.aspect=m/l,i.updateProjectionMatrix()}),window.addEventListener("resize",o);function a(){requestAnimationFrame(a),s.render(x,i)}a()}),(s,o)=>(d(),_("canvas",{id:"canvas",ref_key:"canvas",ref:t},null,512))}});const we=h(be,[["__scopeId","data-v-16959db8"]]),xe=v({__name:"BaseButton",props:{wide:{type:Boolean,default:!1}},emits:["click"],setup(e,{emit:t}){function n(){t("click")}return(i,s)=>(d(),_("button",{class:W(["button",{wide:e.wide}]),type:"button",onClick:n},[M(i.$slots,"default",{},void 0,!0)],2))}});const T=h(xe,[["__scopeId","data-v-77fef1d0"]]),ye=["value"],Ie=v({__name:"BaseSelect",props:{options:null},emits:["toogle"],setup(e,{emit:t}){const n=g("mm");return G(n,()=>{t("toogle",n.value)}),(i,s)=>C((d(),_("select",{"onUpdate:modelValue":s[0]||(s[0]=o=>n.value=o),class:"select",name:"dimensionAbbreviation"},[(d(!0),_(X,null,E(e.options,o=>(d(),_("option",{key:o.value,value:o.value,class:"select__option"},f(o.text),9,ye))),128))],512)),[[j,n.value]])}});const Se=h(Ie,[["__scopeId","data-v-fa6d2f4a"]]),Ce={ref:"modal",class:"modal"},Ae={class:"text"},Be=v({__name:"TheModal",emits:["close"],setup(e,{emit:t}){const n=g(),i=()=>{t("close")};function s(o){o.target==n.value&&i()}return F(()=>{window.addEventListener("click",s)}),R(()=>{window.removeEventListener("click",s)}),(o,a)=>(d(),S(U,{to:"body"},[c("div",{ref_key:"modalOutside",ref:n,class:"modal-outside"},[c("div",Ce,[c("span",Ae,[M(o.$slots,"default",{},void 0,!0)]),b(T,{class:"button-close",type:"button",onClick:i},{default:I(()=>[A("Close")]),_:1})],512)],512)]))}});const Le=h(Be,[["__scopeId","data-v-cd84380e"]]);function Me(e){const t=/(\d+(?:\.\d+)?), ?(\d+(?:\.\d+)?), ?(\d+(?:\.\d+)?)/,n=e.match(t);if(!!n)return{data:n[0],width:+n[1],height:+n[2],length:+n[3]}}const O=e=>(Z("data-v-3f04f103"),e=e(),J(),e),ke={class:"menu"},$e={class:"item"},Fe=O(()=>c("label",{class:"item__label",for:"item__name"},"Item name",-1)),Xe={class:"item"},Ee=O(()=>c("label",{class:"item__label",for:"item__params"},"Item size",-1)),De=v({__name:"TheMenu",setup(e){const t=g(!1),n=g("mm"),i=[{text:"millimeter",value:"mm"},{text:"centimeter",value:"cm"},{text:"meter",value:"m"},{text:"inch",value:"in"},{text:"feet",value:"ft"},{text:"yards",value:"ya"},{text:"miles",value:"mi"}];function s(l){n.value=l}const o=y(),a=g(""),r=g("");function m(){if(!a.value||!r.value){t.value=!0;return}const l=Me(r.value);if(!l)return;const p=a.value,{height:w,width:N,length:q}=l,V=ve(),z=n.value,H={name:p,width:N,height:w,length:q,color:V,dimensionAbbr:z};o.addItem(H),a.value="",r.value=""}return(l,p)=>(d(),_("div",ke,[c("div",$e,[C(c("input",{id:"item__name","onUpdate:modelValue":p[0]||(p[0]=w=>a.value=w),type:"text",class:"item__input",placeholder:"box 1",required:""},null,512),[[k,a.value]]),Fe]),c("div",Xe,[C(c("input",{id:"item__params","onUpdate:modelValue":p[1]||(p[1]=w=>r.value=w),type:"text",class:"item__input",placeholder:"width, height, length",required:""},null,512),[[k,r.value]]),Ee]),b(Se,{options:i,onToogle:s}),b(T,{onClick:m},{default:I(()=>[A(" Add item")]),_:1}),t.value?(d(),S(Le,{key:0,onClose:p[2]||(p[2]=w=>t.value=!t.value)},{default:I(()=>[A(" Enter the object name, width, height and length ")]),_:1})):D("",!0)]))}});const Pe=h(De,[["__scopeId","data-v-3f04f103"]]),Te={},Oe={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 320 512"},Ne=c("path",{d:"M310.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L160 210.7 54.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L114.7 256 9.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L160 301.3 265.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L205.3 256 310.6 150.6z"},null,-1),qe=[Ne];function Ve(e,t){return d(),_("svg",Oe,qe)}const ze=h(Te,[["render",Ve]]),He={class:"item"},We=v({__name:"ItemsListItem",props:{index:{type:Number,required:!0},height:{type:Number,required:!0},width:{type:Number,required:!0},length:{type:Number,required:!0},name:{type:String,required:!0},color:{type:String,required:!0},dimensionAbbr:{type:String,required:!0}},setup(e){const t=e;K(o=>({"609b220b":B(i)}));const n=y(),i=Y(()=>t.color);function s(){n.removeItem(t.index)}return(o,a)=>(d(),_("div",He,[c("div",null,f(t.name),1),c("div",null," ("+f(t.height)+f(e.dimensionAbbr)+" x "+f(t.width)+f(e.dimensionAbbr)+" x "+f(t.length)+f(e.dimensionAbbr)+") ",1),c("button",{type:"button",class:"button-delete","aria-label":"delete item",onClick:s},[b(ze,{class:"button-delete__icon","aria-hidden":"true",tabindex:"-1"})])]))}});const Ge=h(We,[["__scopeId","data-v-108f64b9"]]),je={key:0,class:"item-list"},Re=v({__name:"ItemsList",setup(e){const{items:t}=y();return(n,i)=>B(t).length?(d(),_("section",je,[(d(!0),_(X,null,E(B(t),(s,o)=>(d(),S(Ge,{key:o,index:o,height:s.height,width:s.width,length:s.length,name:s.name,color:s.color,"dimension-abbr":s.dimensionAbbr},null,8,["index","height","width","length","name","color","dimension-abbr"]))),128))])):D("",!0)}});const Ue=h(Re,[["__scopeId","data-v-8197ae98"]]),Ze={class:"intro"},Je={class:"menu-container"},Ke=v({__name:"App",setup(e){return window.matchMedia("(prefers-color-scheme: dark)").matches&&document.documentElement.classList.add("dark"),(t,n)=>(d(),S(he,null,{default:I(()=>[c("main",Ze,[b(we),c("div",Je,[b(Pe),b(Ue)])])]),_:1}))}});const Ye=h(Ke,[["__scopeId","data-v-c528039c"]]);Q(Ye).use(ee()).mount("#app");
